<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•œêµ­ì–´ ë‹¨ì¼ í˜ì´ì§€ ì•±</title>

    <!-- CDNì„ í†µí•œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <!-- Bootstrap CSS - ë°˜ì‘í˜• UI í”„ë ˆì„ì›Œí¬ -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Font Awesome - ì•„ì´ì½˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- ì»¤ìŠ¤í…€ ìŠ¤íƒ€ì¼ -->
    <style>
        /* ì „ì²´ í˜ì´ì§€ ë°°ê²½ ìŠ¤íƒ€ì¼ */
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* ë©”ì¸ ì»¨í…Œì´ë„ˆ ìŠ¤íƒ€ì¼ */
        .main-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-top: 50px;
            padding: 40px;
        }

        /* í—¤ë” ìŠ¤íƒ€ì¼ */
        .header-section {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid #e9ecef;
        }

        /* ì¹´ë“œ ìŠ¤íƒ€ì¼ */
        .feature-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            border-radius: 10px;
            height: 100%;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .custom-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 25px;
            padding: 10px 30px;
            color: white;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .custom-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
            color: white;
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in {
            animation: fadeInUp 0.8s ease-out;
        }

        /* íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .upload-area {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            transition: all 0.3s ease;
            margin-bottom: 20px;
        }

        .upload-area:hover {
            border-color: #764ba2;
            background: rgba(118, 75, 162, 0.05);
        }

        .upload-area.dragover {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }

        .file-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 10px;
            background: #f8f9fa;
        }

        .file-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #dee2e6;
        }

        .file-item:last-child {
            border-bottom: none;
        }

        .progress {
            height: 8px;
            margin-top: 10px;
        }

        .tab-content {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="main-container animate-fade-in">

                    <!-- í—¤ë” ì„¹ì…˜ -->
                    <div class="header-section">
                        <h1 class="display-4 text-primary mb-3">
                            <i class="fas fa-rocket me-3"></i>
                            ì›¹ ì•± ì„¼í„°
                        </h1>
                        <p class="lead text-muted">
                            PDF ë„êµ¬ì™€ ê²Œì„ì„ í•œ ê³³ì—ì„œ ì¦ê²¨ë³´ì„¸ìš”!
                        </p>
                    </div>

                    <!-- ì•± ì„ íƒ ì„¹ì…˜ -->
                    <div class="row g-4 mb-5">
                        <div class="col-lg-4 col-md-6">
                            <div class="card h-100 border-0 shadow-lg" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                <div class="card-body text-center text-white p-4">
                                    <div class="mb-3">
                                        <i class="fas fa-file-pdf fa-4x opacity-75"></i>
                                    </div>
                                    <h4 class="card-title mb-3">PDF ë„êµ¬</h4>
                                    <p class="card-text mb-3">
                                        ì´ë¯¸ì§€ë¥¼ PDFë¡œ ë³€í™˜í•˜ê³ 
                                        ì—¬ëŸ¬ PDFë¥¼ ë³‘í•©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤
                                    </p>
                                    <div class="mb-3">
                                        <span class="badge bg-light text-dark me-1">
                                            <i class="fas fa-image me-1"></i>ë³€í™˜
                                        </span>
                                        <span class="badge bg-light text-dark">
                                            <i class="fas fa-layer-group me-1"></i>ë³‘í•©
                                        </span>
                                    </div>
                                    <button class="btn btn-light px-3" onclick="showPdfTools()">
                                        <i class="fas fa-tools me-2"></i>
                                        PDF ë„êµ¬ ì—´ê¸°
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-6">
                            <div class="card h-100 border-0 shadow-lg" style="background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);">
                                <div class="card-body text-center text-white p-4">
                                    <div class="mb-3">
                                        <i class="fas fa-gamepad fa-4x opacity-75"></i>
                                    </div>
                                    <h4 class="card-title mb-3">ë²½ëŒê¹¨ê¸°</h4>
                                    <p class="card-text mb-3">
                                        í´ë˜ì‹í•œ ë²½ëŒê¹¨ê¸° ê²Œì„ì„
                                        ë¸Œë¼ìš°ì €ì—ì„œ ì¦ê²¨ë³´ì„¸ìš”
                                    </p>
                                    <div class="mb-3">
                                        <span class="badge bg-light text-dark me-1">
                                            <i class="fas fa-mouse me-1"></i>ë§ˆìš°ìŠ¤
                                        </span>
                                        <span class="badge bg-light text-dark me-1">
                                            <i class="fas fa-keyboard me-1"></i>í‚¤ë³´ë“œ
                                        </span>
                                        <span class="badge bg-light text-dark">
                                            <i class="fas fa-mobile-alt me-1"></i>ëª¨ë°”ì¼
                                        </span>
                                    </div>
                                    <a href="/breakout.html" class="btn btn-light px-3">
                                        <i class="fas fa-play me-2"></i>
                                        ê²Œì„ ì‹œì‘
                                    </a>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-4 col-md-6">
                            <div class="card h-100 border-0 shadow-lg" style="background: linear-gradient(135deg, #667eea 0%, #f093fb 100%);">
                                <div class="card-body text-center text-white p-4">
                                    <div class="mb-3">
                                        <i class="fas fa-music fa-4x opacity-75"></i>
                                    </div>
                                    <h4 class="card-title mb-3">Arrow Dance</h4>
                                    <p class="card-text mb-3">
                                        ë¦¬ë“¬ì— ë§ì¶° í™”ì‚´í‘œë¥¼ ëˆ„ë¥´ëŠ”
                                        ë¦¬ë“¬ ì•¡ì…˜ ê²Œì„ì…ë‹ˆë‹¤
                                    </p>
                                    <div class="mb-3">
                                        <span class="badge bg-light text-dark me-1">
                                            <i class="fas fa-arrows-alt me-1"></i>í™”ì‚´í‘œ
                                        </span>
                                        <span class="badge bg-light text-dark me-1">
                                            <i class="fas fa-star me-1"></i>ì½¤ë³´
                                        </span>
                                        <span class="badge bg-light text-dark">
                                            <i class="fas fa-trophy me-1"></i>ì ìˆ˜
                                        </span>
                                    </div>
                                    <a href="/rhythm.html" class="btn btn-light px-3">
                                        <i class="fas fa-music me-2"></i>
                                        ë¦¬ë“¬ ê²Œì„
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- PDF ê¸°ëŠ¥ ì„¹ì…˜ -->
                    <div class="row mb-4 d-none" id="pdf-tools-section">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                                    <h5 class="mb-0">
                                        <i class="fas fa-tools me-2"></i>
                                        PDF ì²˜ë¦¬ ë„êµ¬
                                    </h5>
                                    <button class="btn btn-outline-light btn-sm" onclick="hidePdfTools()">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="card-body">
                                    <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
                                    <ul class="nav nav-tabs" id="pdfTabs" role="tablist">
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link active" id="convert-tab" data-bs-toggle="tab" data-bs-target="#convert-panel" type="button" role="tab">
                                                <i class="fas fa-image me-1"></i>
                                                ì´ë¯¸ì§€ â†’ PDF
                                            </button>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <button class="nav-link" id="merge-tab" data-bs-toggle="tab" data-bs-target="#merge-panel" type="button" role="tab">
                                                <i class="fas fa-file-pdf me-1"></i>
                                                PDF ë³‘í•©
                                            </button>
                                        </li>
                                    </ul>

                                    <!-- íƒ­ ì½˜í…ì¸  -->
                                    <div class="tab-content" id="pdfTabContent">
                                        <!-- ì´ë¯¸ì§€ë¥¼ PDFë¡œ ë³€í™˜ -->
                                        <div class="tab-pane fade show active" id="convert-panel" role="tabpanel">
                                            <h6 class="mb-3">
                                                <i class="fas fa-upload me-2 text-primary"></i>
                                                JPG/PNG ì´ë¯¸ì§€ë¥¼ PDFë¡œ ë³€í™˜
                                            </h6>

                                            <div class="upload-area" id="image-upload-area">
                                                <i class="fas fa-cloud-upload-alt fa-3x text-muted mb-3"></i>
                                                <p class="mb-2">ì´ë¯¸ì§€ íŒŒì¼ì„ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”</p>
                                                <p class="text-muted small">ì§€ì› í˜•ì‹: JPG, PNG (ìµœëŒ€ 10MB)</p>
                                                <input type="file" id="image-input" multiple accept="image/*" class="d-none">
                                            </div>

                                            <div id="image-file-list" class="file-list d-none">
                                                <div class="d-flex justify-content-between align-items-center mb-2">
                                                    <strong>ì„ íƒëœ ì´ë¯¸ì§€ íŒŒì¼ë“¤:</strong>
                                                    <button class="btn btn-sm btn-outline-secondary" id="clear-images">
                                                        <i class="fas fa-times"></i> ì „ì²´ ì‚­ì œ
                                                    </button>
                                                </div>
                                                <div id="image-files"></div>
                                            </div>

                                            <div class="text-center mt-3">
                                                <button class="btn custom-btn" id="convert-to-pdf-btn" disabled>
                                                    <i class="fas fa-file-pdf me-1"></i>
                                                    PDFë¡œ ë³€í™˜í•˜ê¸°
                                                </button>
                                            </div>

                                            <div id="convert-progress" class="d-none">
                                                <div class="progress">
                                                    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                                                </div>
                                                <p class="text-center mt-2 mb-0">PDF ë³€í™˜ ì¤‘...</p>
                                            </div>
                                        </div>

                                        <!-- PDF ë³‘í•© -->
                                        <div class="tab-pane fade" id="merge-panel" role="tabpanel">
                                            <h6 class="mb-3">
                                                <i class="fas fa-layer-group me-2 text-warning"></i>
                                                ì—¬ëŸ¬ PDF íŒŒì¼ì„ í•˜ë‚˜ë¡œ ë³‘í•©
                                            </h6>

                                            <div class="upload-area" id="pdf-upload-area">
                                                <i class="fas fa-file-pdf fa-3x text-muted mb-3"></i>
                                                <p class="mb-2">PDF íŒŒì¼ì„ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”</p>
                                                <p class="text-muted small">ì§€ì› í˜•ì‹: PDF (ìµœëŒ€ 10MB ê°ê°)</p>
                                                <input type="file" id="pdf-input" multiple accept=".pdf" class="d-none">
                                            </div>

                                            <div id="pdf-file-list" class="file-list d-none">
                                                <div class="d-flex justify-content-between align-items-center mb-2">
                                                    <strong>ì„ íƒëœ PDF íŒŒì¼ë“¤:</strong>
                                                    <button class="btn btn-sm btn-outline-secondary" id="clear-pdfs">
                                                        <i class="fas fa-times"></i> ì „ì²´ ì‚­ì œ
                                                    </button>
                                                </div>
                                                <div id="pdf-files"></div>
                                            </div>

                                            <div class="text-center mt-3">
                                                <button class="btn custom-btn" id="merge-pdfs-btn" disabled>
                                                    <i class="fas fa-layer-group me-1"></i>
                                                    PDF ë³‘í•©í•˜ê¸°
                                                </button>
                                            </div>

                                            <div id="merge-progress" class="d-none">
                                                <div class="progress">
                                                    <div class="progress-bar progress-bar-striped progress-bar-animated bg-warning" role="progressbar" style="width: 0%"></div>
                                                </div>
                                                <p class="text-center mt-2 mb-0">PDF ë³‘í•© ì¤‘...</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- ê¸°ëŠ¥ ì¹´ë“œ ì„¹ì…˜ -->
                    <div class="row g-4 mb-5">
                        <div class="col-md-4">
                            <div class="card feature-card">
                                <div class="card-body text-center p-4">
                                    <div class="mb-3">
                                        <i class="fas fa-mobile-alt fa-3x text-info"></i>
                                    </div>
                                    <h5 class="card-title">ë°˜ì‘í˜• ë””ìì¸</h5>
                                    <p class="card-text text-muted">
                                        ëª¨ë“  ê¸°ê¸°ì—ì„œ ì™„ë²½í•˜ê²Œ ì‘ë™í•˜ëŠ” ë°˜ì‘í˜• ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="card feature-card">
                                <div class="card-body text-center p-4">
                                    <div class="mb-3">
                                        <i class="fas fa-bolt fa-3x text-warning"></i>
                                    </div>
                                    <h5 class="card-title">ë¹ ë¥¸ ì„±ëŠ¥</h5>
                                    <p class="card-text text-muted">
                                        CDNì„ í™œìš©í•œ ìµœì í™”ëœ ë¦¬ì†ŒìŠ¤ ë¡œë”©ìœ¼ë¡œ ë¹ ë¥¸ í˜ì´ì§€ ë¡œë“œ
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <a href="/breakout.html" class="text-decoration-none">
                                <div class="card feature-card">
                                    <div class="card-body text-center p-4">
                                        <div class="mb-3">
                                            <i class="fas fa-gamepad fa-3x text-success"></i>
                                        </div>
                                        <h5 class="card-title">ë²½ëŒê¹¨ê¸° ê²Œì„</h5>
                                        <p class="card-text text-muted">
                                            í´ë˜ì‹í•œ ë²½ëŒê¹¨ê¸° ê²Œì„ì„ ì¦ê²¨ë³´ì„¸ìš”! í´ë¦­í•˜ì—¬ í”Œë ˆì´
                                        </p>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>

                    <!-- ì¸í„°ë™ì…˜ ì„¹ì…˜ -->
                    <div class="row mb-4">
                        <div class="col-12">
                            <div class="card">
                                <div class="card-header bg-primary text-white">
                                    <h5 class="mb-0">
                                        <i class="fas fa-cogs me-2"></i>
                                        ì• í”Œë¦¬ì¼€ì´ì…˜ ì œì–´íŒ
                                    </h5>
                                </div>
                                <div class="card-body">
                                    <div class="row align-items-center">
                                        <div class="col-md-8">
                                            <p class="mb-2 fw-bold">í˜„ì¬ ì‹œê°„:</p>
                                            <p id="current-time" class="text-primary fs-5">--</p>
                                        </div>
                                        <div class="col-md-4 text-end">
                                            <button id="refresh-time" class="btn custom-btn me-2">
                                                <i class="fas fa-sync-alt me-1"></i>
                                                ì‹œê°„ ìƒˆë¡œê³ ì¹¨
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>


                    <!-- ì•Œë¦¼ ì˜ì—­ -->
                    <div id="notification-area"></div>

                    <!-- í‘¸í„° -->
                    <footer class="text-center pt-4 border-top">
                        <p class="text-muted mb-0">
                            <i class="fas fa-heart text-danger me-1"></i>
                            í•œêµ­ì–´ SPA ë°ëª¨ ì•± - Express.js ì„œë²„ì—ì„œ ì œê³µ
                        </p>
                    </footer>

                </div>
            </div>
        </div>
    </div>

    <!-- CDNì„ í†µí•œ JavaScript ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ -->
    <!-- Bootstrap JS - UI ì»´í¬ë„ŒíŠ¸ ê¸°ëŠ¥ -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- ì»¤ìŠ¤í…€ JavaScript -->
    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰ë˜ëŠ” ì´ˆê¸°í™” í•¨ìˆ˜
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ í•œêµ­ì–´ SPA ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');

            // ì´ˆê¸° ì‹œê°„ ì„¤ì •
            updateCurrentTime();

            // 1ì´ˆë§ˆë‹¤ ì‹œê°„ ì—…ë°ì´íŠ¸
            setInterval(updateCurrentTime, 1000);

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
            setupEventListeners();

            // í™˜ì˜ ë©”ì‹œì§€ í‘œì‹œ
            showNotification('ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì„±ê³µì ìœ¼ë¡œ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        });

        /**
         * í˜„ì¬ ì‹œê°„ì„ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜
         * í•œêµ­ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ í‘œì‹œ
         */
        function updateCurrentTime() {
            const now = new Date();
            const options = {
                timeZone: 'Asia/Seoul',
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
                hour12: false
            };

            const timeString = now.toLocaleString('ko-KR', options);
            document.getElementById('current-time').textContent = timeString;
        }

        /**
         * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•˜ëŠ” í•¨ìˆ˜
         */
        function setupEventListeners() {
            // ì‹œê°„ ìƒˆë¡œê³ ì¹¨ ë²„íŠ¼ ì´ë²¤íŠ¸
            document.getElementById('refresh-time').addEventListener('click', function() {
                // ë²„íŠ¼ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
                this.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    this.style.transform = 'scale(1)';
                }, 150);

                // ì‹œê°„ ì—…ë°ì´íŠ¸ ë° ì•Œë¦¼ í‘œì‹œ
                updateCurrentTime();
                showNotification('ì‹œê°„ì´ ìƒˆë¡œê³ ì¹¨ë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
            });

            // ì¹´ë“œ í˜¸ë²„ íš¨ê³¼ ê°œì„ 
            const cards = document.querySelectorAll('.feature-card');
            cards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.borderColor = '#667eea';
                });

                card.addEventListener('mouseleave', function() {
                    this.style.borderColor = '';
                });
            });
        }

        /**
         * ì•Œë¦¼ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
         * @param {string} message - í‘œì‹œí•  ë©”ì‹œì§€
         * @param {string} type - ì•Œë¦¼ íƒ€ì… (success, info, warning, danger)
         */
        function showNotification(message, type = 'info') {
            const notificationArea = document.getElementById('notification-area');

            // ì•Œë¦¼ ìš”ì†Œ ìƒì„±
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type} alert-dismissible fade show`;
            alertDiv.setAttribute('role', 'alert');

            // íƒ€ì…ë³„ ì•„ì´ì½˜ ì„¤ì •
            const icons = {
                success: 'fas fa-check-circle',
                info: 'fas fa-info-circle',
                warning: 'fas fa-exclamation-triangle',
                danger: 'fas fa-times-circle'
            };

            alertDiv.innerHTML = `
                <i class="${icons[type]} me-2"></i>
                ${message}
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            `;

            // ì•Œë¦¼ ì˜ì—­ì— ì¶”ê°€
            notificationArea.appendChild(alertDiv);

            // 5ì´ˆ í›„ ìë™ ì œê±°
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 5000);
        }

        /**
         * SPA ë¼ìš°íŒ… ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜ (ë°ëª¨ìš©)
         * ì‹¤ì œ í”„ë¡œì íŠ¸ì—ì„œëŠ” React Router, Vue Router ë“±ì„ ì‚¬ìš©
         */
        function navigateTo(path) {
            console.log(`ğŸ”„ ë‚´ë¹„ê²Œì´ì…˜: ${path}`);
            showNotification(`í˜ì´ì§€ ì´ë™: ${path}`, 'info');

            // ì‹¤ì œ SPAì—ì„œëŠ” ì—¬ê¸°ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ê±°ë‚˜ ë·°ë¥¼ ë³€ê²½
            // í˜„ì¬ëŠ” ë°ëª¨ì´ë¯€ë¡œ ì½˜ì†” ë¡œê·¸ì™€ ì•Œë¦¼ë§Œ í‘œì‹œ
        }

        /**
         * ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ ê´€ë¦¬ ê°ì²´
         */
        const AppState = {
            currentUser: null,
            theme: 'light',
            language: 'ko',

            /**
             * ì‚¬ìš©ì ì„¤ì •
             */
            setUser: function(user) {
                this.currentUser = user;
                console.log('ğŸ‘¤ ì‚¬ìš©ì ì„¤ì •:', user);
            },

            /**
             * í…Œë§ˆ ë³€ê²½
             */
            setTheme: function(theme) {
                this.theme = theme;
                console.log('ğŸ¨ í…Œë§ˆ ë³€ê²½:', theme);
                showNotification(`í…Œë§ˆê°€ ${theme}ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`, 'success');
            }
        };

        // ì „ì—­ ê°ì²´ë¡œ ë“±ë¡ (ë””ë²„ê¹…ìš©)
        window.AppState = AppState;

        // ê°œë°œì ë„êµ¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        window.debugUtils = {
            showTime: updateCurrentTime,
            notify: showNotification,
            navigate: navigateTo,
            state: AppState
        };

        console.log('ğŸ’¡ ê°œë°œì ë„êµ¬ì—ì„œ window.debugUtilsë¥¼ ì‚¬ìš©í•´ ì•±ì„ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');

        // ========== PDF ê¸°ëŠ¥ ê´€ë ¨ í•¨ìˆ˜ë“¤ ==========

        /**
         * íŒŒì¼ ì—…ë¡œë“œ ê´€ë ¨ ë³€ìˆ˜
         */
        let selectedImages = [];
        let selectedPdfs = [];

        /**
         * PDF ê¸°ëŠ¥ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
         */
        function setupPdfEventListeners() {
            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì˜ì—­
            const imageUploadArea = document.getElementById('image-upload-area');
            const imageInput = document.getElementById('image-input');
            const imageFileList = document.getElementById('image-file-list');
            const imageFiles = document.getElementById('image-files');
            const clearImagesBtn = document.getElementById('clear-images');
            const convertBtn = document.getElementById('convert-to-pdf-btn');

            // PDF ì—…ë¡œë“œ ì˜ì—­
            const pdfUploadArea = document.getElementById('pdf-upload-area');
            const pdfInput = document.getElementById('pdf-input');
            const pdfFileList = document.getElementById('pdf-file-list');
            const pdfFiles = document.getElementById('pdf-files');
            const clearPdfsBtn = document.getElementById('clear-pdfs');
            const mergeBtn = document.getElementById('merge-pdfs-btn');

            // ì´ë¯¸ì§€ ì—…ë¡œë“œ ì´ë²¤íŠ¸
            imageUploadArea.addEventListener('click', () => imageInput.click());
            imageUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                imageUploadArea.classList.add('dragover');
            });
            imageUploadArea.addEventListener('dragleave', () => {
                imageUploadArea.classList.remove('dragover');
            });
            imageUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                imageUploadArea.classList.remove('dragover');
                handleImageFiles(e.dataTransfer.files);
            });

            imageInput.addEventListener('change', (e) => {
                handleImageFiles(e.target.files);
            });

            clearImagesBtn.addEventListener('click', () => {
                selectedImages = [];
                updateImageFileList();
            });

            convertBtn.addEventListener('click', convertToPdf);

            // PDF ì—…ë¡œë“œ ì´ë²¤íŠ¸
            pdfUploadArea.addEventListener('click', () => pdfInput.click());
            pdfUploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                pdfUploadArea.classList.add('dragover');
            });
            pdfUploadArea.addEventListener('dragleave', () => {
                pdfUploadArea.classList.remove('dragover');
            });
            pdfUploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                pdfUploadArea.classList.remove('dragover');
                handlePdfFiles(e.dataTransfer.files);
            });

            pdfInput.addEventListener('change', (e) => {
                handlePdfFiles(e.target.files);
            });

            clearPdfsBtn.addEventListener('click', () => {
                selectedPdfs = [];
                updatePdfFileList();
            });

            mergeBtn.addEventListener('click', mergePdfs);
        }

        /**
         * ì´ë¯¸ì§€ íŒŒì¼ ì²˜ë¦¬
         */
        function handleImageFiles(files) {
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    if (file.size <= 10 * 1024 * 1024) { // 10MB ì œí•œ
                        selectedImages.push(file);
                    } else {
                        showNotification(`íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤: ${file.name} (ìµœëŒ€ 10MB)`, 'warning');
                    }
                } else {
                    showNotification(`ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤: ${file.name}`, 'warning');
                }
            });
            updateImageFileList();
        }

        /**
         * PDF íŒŒì¼ ì²˜ë¦¬
         */
        function handlePdfFiles(files) {
            Array.from(files).forEach(file => {
                if (file.type === 'application/pdf') {
                    if (file.size <= 10 * 1024 * 1024) { // 10MB ì œí•œ
                        selectedPdfs.push(file);
                    } else {
                        showNotification(`íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤: ${file.name} (ìµœëŒ€ 10MB)`, 'warning');
                    }
                } else {
                    showNotification(`ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤: ${file.name}`, 'warning');
                }
            });
            updatePdfFileList();
        }

        /**
         * ì´ë¯¸ì§€ íŒŒì¼ ëª©ë¡ ì—…ë°ì´íŠ¸
         */
        function updateImageFileList() {
            const imageFiles = document.getElementById('image-files');
            const imageFileList = document.getElementById('image-file-list');
            const convertBtn = document.getElementById('convert-to-pdf-btn');

            if (selectedImages.length === 0) {
                imageFileList.classList.add('d-none');
                convertBtn.disabled = true;
            } else {
                imageFileList.classList.remove('d-none');
                convertBtn.disabled = false;

                imageFiles.innerHTML = selectedImages.map((file, index) => `
                    <div class="file-item">
                        <span>
                            <i class="fas fa-image me-2 text-primary"></i>
                            ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)
                        </span>
                        <button class="btn btn-sm btn-outline-danger" onclick="removeImageFile(${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `).join('');
            }
        }

        /**
         * PDF íŒŒì¼ ëª©ë¡ ì—…ë°ì´íŠ¸
         */
        function updatePdfFileList() {
            const pdfFiles = document.getElementById('pdf-files');
            const pdfFileList = document.getElementById('pdf-file-list');
            const mergeBtn = document.getElementById('merge-pdfs-btn');

            if (selectedPdfs.length === 0) {
                pdfFileList.classList.add('d-none');
                mergeBtn.disabled = true;
            } else {
                pdfFileList.classList.remove('d-none');
                mergeBtn.disabled = selectedPdfs.length < 2;

                pdfFiles.innerHTML = selectedPdfs.map((file, index) => `
                    <div class="file-item">
                        <span>
                            <i class="fas fa-file-pdf me-2 text-danger"></i>
                            ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)
                        </span>
                        <button class="btn btn-sm btn-outline-danger" onclick="removePdfFile(${index})">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                `).join('');
            }
        }

        /**
         * ì´ë¯¸ì§€ íŒŒì¼ ì œê±°
         */
        function removeImageFile(index) {
            selectedImages.splice(index, 1);
            updateImageFileList();
        }

        /**
         * PDF íŒŒì¼ ì œê±°
         */
        function removePdfFile(index) {
            selectedPdfs.splice(index, 1);
            updatePdfFileList();
        }

        /**
         * ì´ë¯¸ì§€ë¥¼ PDFë¡œ ë³€í™˜
         */
        async function convertToPdf() {
            if (selectedImages.length === 0) {
                showNotification('ë³€í™˜í•  ì´ë¯¸ì§€ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.', 'warning');
                return;
            }

            const progressDiv = document.getElementById('convert-progress');
            const progressBar = progressDiv.querySelector('.progress-bar');
            const convertBtn = document.getElementById('convert-to-pdf-btn');

            try {
                // ì§„í–‰ ìƒí™© í‘œì‹œ
                progressDiv.classList.remove('d-none');
                progressBar.style.width = '20%';
                convertBtn.disabled = true;

                const formData = new FormData();
                selectedImages.forEach(file => {
                    formData.append('images', file);
                });

                progressBar.style.width = '50%';

                const response = await fetch('/convert-to-pdf', {
                    method: 'POST',
                    body: formData
                });

                progressBar.style.width = '80%';

                const result = await response.json();

                if (result.success) {
                    progressBar.style.width = '100%';
                    showNotification('PDF ë³€í™˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');

                    // ë‹¤ìš´ë¡œë“œ ë§í¬ í‘œì‹œ
                    showDownloadLink(result.downloadUrl, result.filename, 'convert-panel');

                    // íŒŒì¼ ëª©ë¡ ì´ˆê¸°í™”
                    selectedImages = [];
                    updateImageFileList();
                } else {
                    throw new Error(result.error || 'PDF ë³€í™˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }

            } catch (error) {
                console.error('PDF ë³€í™˜ ì˜¤ë¥˜:', error);
                showNotification(`ë³€í™˜ ì˜¤ë¥˜: ${error.message}`, 'danger');
            } finally {
                // ì§„í–‰ ìƒí™© ìˆ¨ê¸°ê¸°
                setTimeout(() => {
                    progressDiv.classList.add('d-none');
                    progressBar.style.width = '0%';
                    convertBtn.disabled = false;
                }, 1000);
            }
        }

        /**
         * PDF íŒŒì¼ ë³‘í•©
         */
        async function mergePdfs() {
            if (selectedPdfs.length < 2) {
                showNotification('ë³‘í•©í•  PDF íŒŒì¼ì„ ìµœì†Œ 2ê°œ ì´ìƒ ì„ íƒí•´ì£¼ì„¸ìš”.', 'warning');
                return;
            }

            const progressDiv = document.getElementById('merge-progress');
            const progressBar = progressDiv.querySelector('.progress-bar');
            const mergeBtn = document.getElementById('merge-pdfs-btn');

            try {
                // ì§„í–‰ ìƒí™© í‘œì‹œ
                progressDiv.classList.remove('d-none');
                progressBar.style.width = '20%';
                mergeBtn.disabled = true;

                const formData = new FormData();
                selectedPdfs.forEach(file => {
                    formData.append('pdfs', file);
                });

                progressBar.style.width = '50%';

                const response = await fetch('/merge-pdfs', {
                    method: 'POST',
                    body: formData
                });

                progressBar.style.width = '80%';

                const result = await response.json();

                if (result.success) {
                    progressBar.style.width = '100%';
                    showNotification('PDF ë³‘í•©ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');

                    // ë‹¤ìš´ë¡œë“œ ë§í¬ í‘œì‹œ
                    showDownloadLink(result.downloadUrl, result.filename, 'merge-panel');

                    // íŒŒì¼ ëª©ë¡ ì´ˆê¸°í™”
                    selectedPdfs = [];
                    updatePdfFileList();
                } else {
                    throw new Error(result.error || 'PDF ë³‘í•©ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }

            } catch (error) {
                console.error('PDF ë³‘í•© ì˜¤ë¥˜:', error);
                showNotification(`ë³‘í•© ì˜¤ë¥˜: ${error.message}`, 'danger');
            } finally {
                // ì§„í–‰ ìƒí™© ìˆ¨ê¸°ê¸°
                setTimeout(() => {
                    progressDiv.classList.add('d-none');
                    progressBar.style.width = '0%';
                    mergeBtn.disabled = false;
                }, 1000);
            }
        }

        /**
         * ë‹¤ìš´ë¡œë“œ ë§í¬ í‘œì‹œ
         */
        function showDownloadLink(downloadUrl, filename, panelId) {
            const panel = document.getElementById(panelId);
            const existingLink = panel.querySelector('.download-link');

            // ê¸°ì¡´ ë§í¬ ì œê±°
            if (existingLink) {
                existingLink.remove();
            }

            // ìƒˆ ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
            const downloadDiv = document.createElement('div');
            downloadDiv.className = 'alert alert-success download-link mt-3';
            downloadDiv.innerHTML = `
                <div class="d-flex justify-content-between align-items-center">
                    <div>
                        <i class="fas fa-download me-2"></i>
                        <strong>ë‹¤ìš´ë¡œë“œ ì¤€ë¹„ ì™„ë£Œ:</strong> ${filename}
                    </div>
                    <div>
                        <a href="${downloadUrl}" class="btn btn-success btn-sm me-2" download>
                            <i class="fas fa-download me-1"></i>ë‹¤ìš´ë¡œë“œ
                        </a>
                        <button class="btn btn-outline-danger btn-sm" onclick="deleteFile('${filename}', this.parentElement.parentElement.parentElement)">
                            <i class="fas fa-trash me-1"></i>ì‚­ì œ
                        </button>
                    </div>
                </div>
            `;

            panel.appendChild(downloadDiv);
        }

        /**
         * ì„œë²„ì—ì„œ íŒŒì¼ ì‚­ì œ
         */
        async function deleteFile(filename, element) {
            try {
                const response = await fetch(`/delete-file/${filename}`, {
                    method: 'DELETE'
                });

                const result = await response.json();

                if (result.success) {
                    element.remove();
                    showNotification('íŒŒì¼ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.', 'info');
                } else {
                    throw new Error(result.error || 'íŒŒì¼ ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                }
            } catch (error) {
                console.error('íŒŒì¼ ì‚­ì œ ì˜¤ë¥˜:', error);
                showNotification(`ì‚­ì œ ì˜¤ë¥˜: ${error.message}`, 'danger');
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ PDF ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
        document.addEventListener('DOMContentLoaded', function() {
            setupPdfEventListeners();
        });

        /**
         * PDF ë„êµ¬ ì„¹ì…˜ í‘œì‹œ
         */
        function showPdfTools() {
            const pdfSection = document.getElementById('pdf-tools-section');
            pdfSection.classList.remove('d-none');

            // ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤í•˜ì—¬ PDF ë„êµ¬ë¡œ ì´ë™
            pdfSection.scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });

            showNotification('PDF ë„êµ¬ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!', 'success');
        }

        /**
         * PDF ë„êµ¬ ì„¹ì…˜ ìˆ¨ê¸°ê¸°
         */
        function hidePdfTools() {
            const pdfSection = document.getElementById('pdf-tools-section');
            pdfSection.classList.add('d-none');

            // ë§¨ ìœ„ë¡œ ë¶€ë“œëŸ½ê²Œ ìŠ¤í¬ë¡¤
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });

            showNotification('PDF ë„êµ¬ê°€ ìˆ¨ê²¨ì¡ŒìŠµë‹ˆë‹¤.', 'info');
        }
    </script>
</body>
</html>